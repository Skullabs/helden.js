window.helden=function(){function h(a){return"function"==typeof a}function q(a,e,b,g){b=b||a;for(var f in a){var d=a[f],c=b[f],c=c==d?null:c;if(d&&h(d.configure)){var n=d.selector?e.find(d.selector):e,d=d.configure(n,b,c,g);d.$=n;n=b;c=f;d=d.bind(b);d.is_wrapped=!0;n[c]=d}else h(d)&&(b[f]=d.bind(b))}return b}function y(a){function e(){}function b(d){arguments.length&&a.setter.apply(this,arguments);return a.getter.apply(this)}function g(d){h(this.param)&&(d=this.param.apply(this.model));return b.call(this,
d)}function f(){return a.notifiable?g.bind(this):b.bind(this)}a.init=a.init||m;a.getter=a.getter||m;a.setter=a.setter||m;e.prototype=a;return function(d){this.configure=function(c,b,g,h){var k=new e;k.param=d;a.optimize||(k.view=c);k.model=b;k.parentModel=h;a.init.call(this);c=f.call(k);c.call(k,g);return c}}}function p(a){function e(a){for(var d=[],c=0;c<a.length;c++)var b=p(a[c]);void 0!=b&&d.push(b);return d}function b(a){for(var d=[],c=0;c<a.length;c++){var b=p(a.get(c));void 0!=b&&d.push(b)}return d}
function g(a){var d={},c;for(c in a)if(!H.unserializableAttributes[c]){var b=p(a[c]);void 0!=b&&(d[c]=b)}return d}return a instanceof s.ObservableArray?b(a):a instanceof Array?e(a):"function"==typeof a?(a=a.is_wrapped?a():void 0,a):"object"==typeof a?g(a):a}function z(a,e){function b(){a.apply(this,e)}b.prototype=a.prototype;return new b}function v(a,e,b){this.onAdd=a;this.onRemove=e;this.onUpdate=b;var g=this.length=0,f=[];this.get=function(a){return f[a]};this.push=function(a){var c=g++;if(a=this.onAdd.call(f,
c,a)||a)f.push.call(f,a),this.length=f.length;return a};this.remove=function(a){a=f.indexOf(a);return this.removeAt(a)};this.removeAt=function(a){if(0<=a){var c=f[a];f.splice(a,1);this.length=f.length;this.onRemove.call(f,a,c)}};this.reset=function(a){for(var c=0;c<this.length;c++)this.remove(f[c]);for(c=0;c<a.length;c++)this.push(a[c])};this.sort=function(a){f.sort(a);this.onSort.call(f)};this.sortByKey=function(a){this.sort(A(a))}}function A(a){return function(e,b){var g=a(e),f=a(b);return g>f?
-1:g<f?1:0}}function t(a,e){function b(a){a.find("*["+e+"]").each(function(){var a=("checkbox"==this.type?this.checked:this.value)||g[this[e]]||"",a=(new u).configure($(this),g,a);g[this[e]]=a})}var g={};e=e||"id";this.selector=a;this.configure=function(a){b(a);return function(a){a&&(g=a);return g}}}function w(a,e){var b=null,g=new v,f=m,d=!0;this.selector=a;this.onChange=function(a){if(!h(a))throw"Callback should be a function";f=a.bind(g);return this};this.autoRemoveTemplate=function(a){null!=a&&
void 0!=a&&(d=a);return this};this.configure=function(a,h,l,r){b=this.selector.replace(/[^a-zA-Z0-9]/g,"");var k=a.parent(),m=a.clone();d&&a.remove();g.onAdd=function(a,c){var d=m.clone();c.ID_ForEachBinder=b+a;d.attr("id",b+a);q(e,d,c,h);k.append(d);f(r);return c};g.onRemove=function(a,b){a=b.ID_ForEachBinder;k.find("#"+a).remove();f(r)};g.onSort=function(){for(var a=null,b=null,c=0;c<this.length;c++)a=k.find("#"+this[c].ID_ForEachBinder),null==b?k.prepend(a):b.after(a),b=a;f(r)};return function(a){a&&
g.reset(a);return g}}}function u(a){function e(a){return function(){return a.val.apply(a,arguments)}}function b(a){return function(b){return void 0==b?a.prop("checked"):a.prop("checked",b)}}function g(a){return function(){return a.text.apply(a,arguments)}}this.selector=a;this.configure=function(a,d,c){a=0<=B.indexOf(a.prop("nodeName").toUpperCase())?"checkbox"==a.attr("type")?b(a):e(a):g(a);h(c)||a(c);return a}}function x(a,e,b){this.selector=a;this.configure=function(a,f,d,c){function h(){for(var d=
[a,c],e=0;e<arguments.length;e++)d.push(arguments[e]);return b.apply(f,d)}a.on(e,h);return h}}function l(a){this.selector=a;for(var e in l.extensions)this[e]=function(b){return function(){var e=y(l.extensions[b]),e=z(e,arguments);e.selector=a;return e}}(e)}var m=function(){},B=["BUTTON","INPUT","TEXTAREA","SELECT"];l.prototype={bind:function(){return 2==arguments.length?new x(this.selector,arguments[0],arguments[1]):new u(this.selector)},bindIds:function(){return new t(this.selector)},bindNames:function(){return new t(this.selector,
"name")},forEach:function(a){return new w(this.selector,a)}};l.extensions={accessor:{getter:function(){return this.value},setter:function(a){this.value=a}},bindAttr:{getter:function(){return this.view.attr(this.param)},setter:function(a){this.view.attr(this.param,a)}},bindProp:{getter:function(){return this.view.prop(this.param)},setter:function(a){this.view.prop(this.param,a)}},bindCss:{getter:function(){return this.view.css(this.param)},setter:function(a){this.view.css(this.param,a)}}};var s={Selector:l,
DomBinder:u,DomEventBinder:x,ForEachBinder:w,FormBinder:t,ObservableArray:v,dsl:{unserializableAttributes:{toJS:!0,ID_ForEachBinder:!0},observable:function(a,e){var b=e?$(e):$("body");return q(a,b)},observeAView:q,bind:l.prototype.bind,wasDefined:function(a){return void 0!=a&&null!=a},isFunction:h,toJS:p,select:function(){if(1==arguments.length&&"string"==typeof arguments[0])return new l(arguments[0]);throw"Invalid syntax";}}};l.apply(s.dsl);return s}();window.H=helden.dsl;
if("undefined"!=typeof useGlobals)for(var attr in H)window[attr]||(window[attr]=H[attr]);!function(){helden.Selector.extensions.visible={notifiable:!0,setter:function(h){(h?this.view.show:this.view.hide).call(this.view);this.isVisible=h},getter:function(){return this.isVisible}};helden.Selector.extensions.focus={getter:function(){this.view.focus()}};helden.Selector.extensions.fadeout={getter:function(){this.view.fadeout()}};helden.Selector.extensions.fadein={getter:function(){this.view.fadein()}}}();