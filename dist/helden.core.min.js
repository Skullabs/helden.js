window.helden=function(){function t(a,b,d){this.onAdd=a;this.onRemove=b;this.onUpdate=d;var e=this.length=0,f=[];this.get=function(c){return f[c]};this.push=function(c){var a=e++;c=this.onAdd.call(f,a,c);f.push.call(f,c);this.length=f.length};this.remove=function(c){c=f.indexOf(c);return this.removeAt(c)};this.removeAt=function(c){if(0<=c){var a=f[c];f.splice(c,1);this.length=f.length;this.onRemove.call(f,c,a)}};this.reset=function(c){for(var a=0;a<this.length;a++)this.remove(f[a]);for(a=0;a<c.length;a++)this.push(c[a])};
this.sort=function(a){f.sort(a);this.onSort.call(f)};this.sortByKey=function(a){this.sort(w(a))}}function w(a){return function(b,d){var e=a(b),f=a(d);return e>f?-1:e<f?1:0}}function n(a,b){function d(a){a.find("*["+b+"]").each(function(){var a=("checkbox"==this.type?this.checked:this.value)||e[this[b]]||"",a=(new p).configure($(this),e,a);e[this[b]]=a})}var e={};b=b||"id";this.selector=a;this.configure=function(a){d(a);return function(a){a&&(e=a);return e}}}function u(a,b){var d=null,e=new t,f=x,
c=!0;this.selector=a;this.onChange=function(a){if("function"!=typeof a)throw"Callback should be a function";f=a.bind(e);return this};this.autoRemoveTemplate=function(a){null!=a&&void 0!=a&&(c=a);return this};this.configure=function(a,k,g,q){d=this.selector.replace(/[^a-zA-Z0-9]/g,"");var l=a.parent(),m=a.clone();c&&a.remove();e.onAdd=function(a,c){var e=m.clone();c.ID_ForEachBinder=d+a;e.attr("id",d+a);r(b,e,c,k);l.append(e);f(q);return c};e.onRemove=function(a,c){a=c.ID_ForEachBinder;l.find("#"+
a).remove();f(q)};e.onSort=function(){for(var a=null,c=null,b=0;b<this.length;b++)a=l.find("#"+this[b].ID_ForEachBinder),null==c?l.prepend(a):c.after(a),c=a;f(q)};return function(a){a&&e.reset(a);return e}}}function p(a){function b(a){return function(){return a.val.apply(a,arguments)}}function d(a){return function(c){return void 0==c?a.prop("checked"):a.prop("checked",c)}}function e(a){return function(){return a.text.apply(a,arguments)}}this.selector=a;this.configure=function(a,c,h){a=0<=y.indexOf(a.prop("nodeName").toUpperCase())?
"checkbox"==a.attr("type")?d(a):b(a):e(a);"function"!=typeof h&&a(h);return a}}function v(a,b,d){this.selector=a;this.configure=function(a,f,c,h){function k(){for(var c=[a,h],b=0;b<arguments.length;b++)c.push(arguments[b]);return d.apply(f,c)}a.on(b,k);return k}}function r(a,b,d,e){d=d||a;for(var f in a){var c=a[f],h=d[f],h=h==c?null:h;if(c&&"function"==typeof c.configure){var k=c.selector?b.find(c.selector):b,h=c.configure(k,d,h,e);h.$=k;var k=d,g=f,c=h.bind(c);c.is_wrapped=!0;k[g]=c}}return d}function l(a){return void 0!=
a&&null!=a}function m(a){function b(a){for(var c=[],b=0;b<a.length;b++)var d=m(a[b]);void 0!=d&&c.push(d);return c}function d(a){for(var c=[],b=0;b<a.length;b++){var d=m(a.get(b));void 0!=d&&c.push(d)}return c}function e(a){var c={},b;for(b in a)if(!H.unserializableAttributes[b]){var d=m(a[b]);void 0!=d&&(c[b]=d)}return c}return a instanceof s.ObservableArray?d(a):a instanceof Array?b(a):"function"==typeof a?(a=a.is_wrapped?a():void 0,a):"object"==typeof a?e(a):a}function z(a,b){function d(){a.apply(this,
b)}d.prototype=a.prototype;return new d}function g(a){this.selector=a;for(var b in g.extensions)this[b]=function(b){return function(){var e=z(g.extensions[b],arguments);e.selector=a;return e}}(b)}var x=function(){},y=["BUTTON","INPUT","TEXTAREA","SELECT"];g.prototype={bind:function(){return 2==arguments.length?new v(this.selector,arguments[0],arguments[1]):new p(this.selector)},bindIds:function(){return new n(this.selector)},bindNames:function(){return new n(this.selector,"name")},forEach:function(a){return new u(this.selector,
a)}};g.extensions={accessor:function(a){this.configure=function(a,d,e){var f=e;return function(a){l(a)&&(f=a);return f}}},bindAttr:function(a){this.configure=function(b,d,e){d=function(d){l(d)&&b.attr(a,d);return b.attr(a)};l(e)&&d(e);return d}},bindProp:function(a){this.configure=function(b,d){return function(){value&&b.prop(a,value);return b.prop(a)}}},bindCss:function(a){this.configure=function(b,d){return function(){value&&b.prop(a,value);return b.css(a)}}}};var s={Selector:g,DomBinder:p,DomEventBinder:v,
ForEachBinder:u,FormBinder:n,ObservableArray:t,dsl:{unserializableAttributes:{toJS:!0,ID_ForEachBinder:!0},observable:function(a,b){var d=b?$(b):$("body");return r(a,d)},observeAView:r,bindAttr:g.extensions.bindAttr,bindProp:g.extensions.bindProp,bindCss:g.extensions.bindCss,bind:g.prototype.bind,wasDefined:l,toJS:m,select:function(){if(1==arguments.length&&"string"==typeof arguments[0])return new g(arguments[0]);throw"Invalid syntax";}}};g.apply(s.dsl);return s}();window.H=helden.dsl;
if("undefined"!=typeof useGlobals)for(var attr in H)window[attr]||(window[attr]=H[attr]);