window.helden=function(){function h(a){return"function"==typeof a}function u(a){return void 0!=a&&null!=a}function r(a,f,b,d){b=b||a;for(var g in a){var e=a[g],c=b[g],c=c==e?null:c;if(e&&h(e.configure)){var m=e.selector?f.find(e.selector):f,e=e.configure(m,b,c,d);e.$=m;m=b;c=g;e=e.bind(b);e.is_wrapped=!0;m[c]=e}else h(e)&&(b[g]=e.bind(b))}return b}function B(a){function f(){}function b(e){arguments.length&&a.setter.apply(this,arguments);return a.getter.apply(this)}function d(a){h(this.param)&&(a=
this.param.apply(this.model));return b.call(this,a)}function g(){return a.notifiable?d.bind(this):b.bind(this)}a.init=a.init||p;a.getter=a.getter||p;a.setter=a.setter||p;f.prototype=a;return function(e){this.configure=function(c,b,d,n){var k=new f;k.param=e;a.optimize||(k.view=c);k.model=b;k.parentModel=n;k.init.call(this);c=g.call(k);c.call(k,d);return c}}}function v(a){return h(a)?function(){return w(a,arguments)}:function(){return a}}function q(a){function f(a){for(var e=[],c=0;c<a.length;c++)var b=
q(a[c]);void 0!=b&&""!==b&&e.push(b);return e}function b(a){for(var e=[],c=0;c<a.length;c++){var b=q(a.get(c));void 0!=b&&""!==b&&e.push(b)}return e}function d(a){var e={},c;for(c in a)if(!H.unserializableAttributes[c]){var b=q(a[c]);void 0!=b&&""!==b&&(e[c]=b)}return e}return a instanceof s.ObservableArray?b(a):a instanceof Array?f(a):"function"==typeof a?(a=a.is_wrapped?a():void 0,a):"object"==typeof a?d(a):a}function w(a,f){function b(){a.apply(this,f)}b.prototype=a.prototype;return new b}function x(a,
f,b){this.onAdd=a;this.onRemove=f;this.onUpdate=b;var d=this.length=0,g=[];this.get=function(a){return g[a]};this.push=function(a){var c=d++;if(a=this.onAdd.call(g,c,a)||a)g.push.call(g,a),this.length=g.length;return a};this.remove=function(a){a=g.indexOf(a);return this.removeAt(a)};this.removeAt=function(a){if(0<=a){var c=g[a];g.splice(a,1);this.length=g.length;this.onRemove.call(g,a,c)}};this.reset=function(a){for(var c=0;c<this.length;c++)this.remove(g[c]);for(c=0;c<a.length;c++)this.push(a[c])};
this.sort=function(a){g.sort(a);this.onSort.call(g)};this.sortByKey=function(a){this.sort(C(a))}}function C(a){return function(f,b){var d=a(f),g=a(b);return d>g?-1:d<g?1:0}}function t(a,f){function b(a){a.find("*["+f+"]").each(function(){var a=("checkbox"==this.type?this.checked:this.value)||d[this[f]]||"",a=(new y).configure($(this),d,a);d[this[f]]=a})}var d={};f=f||"id";this.selector=a;this.configure=function(a){b(a);return function(a){if(a){var c=null,b;for(b in d)c=a[b],u(c)||(c=""),d[b](c)}return d}}}
function z(a,f){var b=null,d=new x,g=p,e=!0;this.selector=a;this.onChange=function(a){if(!h(a))throw"Callback should be a function";g=a.bind(d);return this};this.autoRemoveTemplate=function(a){null!=a&&void 0!=a&&(e=a);return this};this.configure=function(a,m,l,n){b=this.selector.replace(/[^a-zA-Z0-9]/g,"");var k=a.parent(),h=a.clone();e&&a.remove();d.onAdd=function(a,c){var d=h.clone();c.ID_ForEachBinder=b+a;d.attr("id",b+a);r(f,d,c,m);k.append(d);g(n);return c};d.onRemove=function(a,b){a=b.ID_ForEachBinder;
k.find("#"+a).remove();g(n)};d.onSort=function(){for(var a=null,b=null,c=0;c<this.length;c++)a=k.find("#"+this[c].ID_ForEachBinder),null==b?k.prepend(a):b.after(a),b=a;g(n)};return function(a){a&&d.reset(a);return d}}}function y(a){function f(a){return function(){return a.val.apply(a,arguments)}}function b(a){return function(b){return void 0==b?a.prop("checked"):a.prop("checked",b)}}function d(a){return function(){return a.text.apply(a,arguments)}}this.selector=a;this.configure=function(a,e,c){a=
0<=D.indexOf(a.prop("nodeName").toUpperCase())?"checkbox"==a.attr("type")?b(a):f(a):d(a);a.is_wrapped=!0;h(c)||a(c);return a}}function A(a,f,b){this.selector=a;this.configure=function(a,g,e,c){function h(){for(var f=[a,c],e=0;e<arguments.length;e++)f.push(arguments[e]);return b.apply(g,f)}a.on(f,h);return h}}function l(a){this.selector=a;for(var f in l.extensions)this[f]=function(b){return function(){var d=B(l.extensions[b]),d=w(d,arguments);d.selector=a;return d}}(f)}var p=function(){},D=["BUTTON",
"INPUT","TEXTAREA","SELECT"];l.prototype={on:function(){if(2==arguments.length)return new A(this.selector,arguments[0],arguments[1]);throw"Invalid arguments for event binding('on' method): "+arguments;},bindIds:function(){return new t(this.selector)},bindNames:v(new t(this.selector,"name")),forEach:function(a){return new z(this.selector,a)}};l.extensions={accessor:{getter:function(){return this.value},setter:function(a){this.value=a}},bindAttr:{getter:function(){return this.view.attr(this.param)},
setter:function(a){this.view.attr(this.param,a)}},bindProp:{getter:function(){return this.view.prop(this.param)},setter:function(a){this.view.prop(this.param,a)}},bindCss:{getter:function(){return this.view.css(this.param)},setter:function(a){this.view.css(this.param,a)}}};var s={Selector:l,DomBinder:y,DomEventBinder:A,ForEachBinder:z,FormBinder:t,ObservableArray:x,dsl:{unserializableAttributes:{toJS:!0,ID_ForEachBinder:!0},observable:function(a,f){var b=f?$(f):$("body");return r(a,b)},observeAView:r,
bind:l.prototype.bind,wasDefined:u,isFunction:h,toJS:q,extension:v,select:function(){if(1==arguments.length&&"string"==typeof arguments[0])return new l(arguments[0]);throw"Invalid syntax";}}};l.apply(s.dsl);return s}();window.H=helden.dsl;if("undefined"!=typeof useGlobals)for(var attr in H)window[attr]||(window[attr]=H[attr]);