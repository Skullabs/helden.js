window.helden=function(){function m(a){return"function"==typeof a}function w(a){return void 0!=a&&null!=a}function r(a,c,d,h){d=d||a;for(var g in a){var f=a[g],b=d[g],b=b==f?null:b;if(f&&m(f.configure)){var e=f.selector?c.find(f.selector):c,f=f.configure(e,d,b,h);d[g]=x(f,d)}else m(f)&&(d[g]=f.bind(d))}return d}function C(a){function c(){}function d(f){arguments.length&&a.setter.apply(this,arguments);return a.getter.apply(this)}function h(a){m(this.param)&&(a=this.param.apply(this.model));return d.call(this,
a)}function g(){return a.notifiable?h.bind(this):d.bind(this)}a.init=a.init||s;a.getter=a.getter||s;a.setter=a.setter||s;c.prototype=a;return function(f){this.configure=function(b,e,d,h){var k=new c;k.param=f;a.optimize||(k.view=b);k.model=e;k.parentModel=h;k.init.call(this);b=g.call(k);b.call(k,d||f);return b}}}function x(a,c){var d=a.bind(c);d.is_wrapped=!0;d.is_dom_event=a.is_dom_event;return d}function p(a){function c(a){for(var f=[],b=0;b<a.length;b++)var e=p(a[b]);void 0!=e&&""!==e&&f.push(e);
return f}function d(a){for(var f=[],b=0;b<a.length;b++){var e=p(a.get(b));void 0!=e&&""!==e&&f.push(e)}return f}function h(a){var f={},b;for(b in a)if(!H.unserializableAttributes[b]){var e=p(a[b]);void 0!=e&&""!==e&&(f[b]=e)}return f}return a instanceof t.ObservableArray?d(a):a instanceof Array?c(a):"function"==typeof a?(a=a.is_wrapped&&!a.is_dom_event?p(a()):void 0,a):"object"==typeof a?h(a):a}function y(a,c){function d(){a.apply(this,c)}d.prototype=a.prototype;return new d}function z(a,c,d){this.onAdd=
a;this.onRemove=c;this.onUpdate=d;var h=this.length=0,g=[];this.get=function(a){return g[a]};this.pushAll=function(a){for(var b=0;b<a.length;b++)this.push(a[b])};this.push=function(a){var b=h++;if(a=this.onAdd.call(g,b,a)||a)g.push(a),this.length=g.length;return a};this.clear=function(){this.reset([])};this.remove=function(a){a=g.indexOf(a);return this.removeAt(a)};this.removeAt=function(a){if(0<=a){var b=g[a];g.splice(a,1);this.length=g.length;this.onRemove.call(g,a,b)}};this.reset=function(a){for(var b=
this.length-1;0<=b;b--)this.remove(g[b]);this.pushAll(a)};this.sort=function(a){g.sort(a);this.onSort.call(g)};this.sortByKey=function(a){this.sort(D(a))}}function D(a){return function(c,d){var h=a(c),g=a(d);return h>g?-1:h<g?1:0}}function u(a,c){function d(a){a.find("*["+c+"]").each(function(){if("radio"!=this.type||!h[this[c]]){var a=("checkbox"==this.type?this.checked:this.value)||h[this[c]]||"",b="radio"==this.type?$("[name\x3d'"+this.name+"']"):$(this),a=(new v).configure(b,h,a);h[this[c]]=a}})}
var h={};c=c||"id";this.selector=a;this.configure=function(a){d(a);return function(a){if(a){var b=null,e;for(e in h)b=a[e],w(b)||(b=""),h[e](b)}return h}}}function A(a,c){var d=null,h=!0;this.selector=a;this.autoRemoveTemplate=function(a){null!=a&&void 0!=a&&(h=a);return this};this.configure=function(a,f,b,e){var n=new z;d=this.selector.replace(/[^a-zA-Z0-9]/g,"");var q=a.parent(),k=a.clone();h&&a.remove();n.onAdd=function(a,e){var b=k.clone();e.ID_ForEachBinder=d+a;b.attr("id",d+a);r(c,b,e,f);q.append(b);
return e};n.onRemove=function(a,e){a=e.ID_ForEachBinder;q.find("#"+a).remove()};n.onSort=function(){for(var a=null,e=null,b=0;b<this.length;b++)a=q.find("#"+this[b].ID_ForEachBinder),null==e?q.prepend(a):e.after(a),e=a};b&&!m(b)&&n.reset(b);return function(a){a&&n.reset(a);return n}}}function v(a,c){function d(){if(!c)return arguments;var a=c.apply(this,arguments);a instanceof Array||(a=[a]);return a}function h(a){return function(){var b=d.apply(this,arguments);return a.val.apply(a,b)}}function g(a){return function(b){arguments.length&&
(b=d(b),a.prop("checked",b[0]));return a.prop("checked")}}function f(a){return function(b){arguments.length&&(b=d(b),a.filter("[value\x3d'"+b[0]+"']").prop("checked",!0));return a.filter(":checked").val()}}function b(a){return function(){var b=d.apply(this,arguments);return a.text.apply(a,b)}}this.selector=a;this.configure=function(a,d,c){var k=a.prop("nodeName");k&&0<=E.indexOf(k.toUpperCase())?(k=a.attr("type"),a="checkbox"==k?g(a):"radio"==k?f(a):h(a)):a=b(a);d=x(a,d);m(c)||d(c);return d}}function B(a,
c,d){this.selector=a;this.configure=function(a,g,f,b){function e(){for(var c=[a,b],e=0;e<arguments.length;e++)c.push(arguments[e]);return d.apply(g,c)}e.is_dom_event=!0;a.on(c,e);return e}}function l(a){this.selector=a;for(var c in l.extensions)this[c]=function(d){return function(){var c=C(l.extensions[d]),c=y(c,arguments);c.selector=a;return c}}(c)}var s=function(){},E=["BUTTON","INPUT","TEXTAREA","SELECT"];l.prototype={bind:function(a){return new v(this.selector,a)},bindIds:function(){return new u(this.selector)},
bindNames:function(){return new u(this.selector,"name")},on:function(){if(2==arguments.length)return new B(this.selector,arguments[0],arguments[1]);throw"Invalid arguments for event binding('on' method): "+arguments;},forEach:function(a){return new A(this.selector,a)}};l.extensions={accessor:{getter:function(){return this.value},setter:function(a){this.value=a}},bindAttr:{getter:function(){return this.view.attr(this.param)},setter:function(a){this.view.attr(this.param,a)}},bindProp:{getter:function(){return this.view.prop(this.param)},
setter:function(a){this.view.prop(this.param,a)}},bindCss:{getter:function(){return this.view.css(this.param)},setter:function(a){this.view.css(this.param,a)}}};var t={Selector:l,DomBinder:v,DomEventBinder:B,ForEachBinder:A,FormBinder:u,ObservableArray:z,dsl:{unserializableAttributes:{toJS:!0,ID_ForEachBinder:!0},observable:function(a,c){var d=c?$(c):$("body");return r(a,d)},observeAView:r,on:l.prototype.on,bind:l.prototype.bind,wasDefined:w,isFunction:m,toJS:p,extension:function(a){return m(a)?function(){var c=
y(a,arguments);c.selector=this.selector;return c}:function(){a.selector=this.selector;return a}},select:function(){if(1==arguments.length&&"string"==typeof arguments[0])return new l(arguments[0]);throw"Invalid syntax";}}};l.apply(t.dsl);return t}();window.H=helden.dsl;if("undefined"!=typeof useGlobals)for(var attr in H)window[attr]||(window[attr]=H[attr]);